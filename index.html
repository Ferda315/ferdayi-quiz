<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ferdayı Ne Kadar Tanıyorsun?</title>
  <style>
    body {
      margin: 0; padding: 0;
      background: #111;
      color: #fff;
      font-family: Arial, Georgia, sans-serif;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #container {
      background: #181818;
      width: 94vw;
      max-width: 410px;
      border-radius: 12px;
      padding: 22px 14px 18px 14px;
      box-shadow: 0 0 22px #a22;
      display: flex;
      flex-direction: column;
      min-height: 70vh;
    }
    #intro {
      font-size: 2.5rem;
      text-align: center;
      color: #ff4444;
      margin-bottom: 32px;
      opacity: 1;
      transition: opacity 1s;
      font-family: inherit;
    }
    #chat {
      flex: 1;
      overflow-y: auto;
      display: none;
      flex-direction: column;
    }
    .message {
      max-width: 90%;
      margin: 10px 0;
      padding: 11px 16px;
      border-radius: 18px;
      font-size: 1.08rem;
      line-height: 1.4;
      animation: fadeIn 0.3s ease forwards;
      opacity: 0;
      background: #222;
      color: #fff;
    }
    .bot {
      align-self: flex-start;
      border-top-left-radius: 0;
      border: 1px solid #ff4444;
      background: #201010;
      color: #ff4444;
    }
    .user {
      align-self: flex-end;
      border-top-right-radius: 0;
      border: 1px solid #444;
      background: #282828;
      color: #fff;
    }
    #question-area {
      margin: 22px 0 14px 0;
      text-align: center;
      font-size: 1.3rem;
      color: #fff;
      font-weight: bold;
      min-height: 40px;
      letter-spacing: 0.5px;
      display: none;
    }
    #options {
      display: none;
      flex-wrap: wrap;
      gap: 11px;
      justify-content: center;
    }
    #options button {
      background: #181818;
      border: 2px solid #ff4444;
      color: #ff4444;
      font-size: 1rem;
      padding: 8px 18px;
      border-radius: 16px;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
      margin-bottom: 7px;
      font-family: inherit;
    }
    #options button:hover {
      background: #ff4444;
      color: #181818;
      border-color: #fff;
      font-weight: bold;
    }
    #result {
      display: none;
      font-size: 1.7rem;
      text-align: center;
      margin-top: 22px;
      color: #ff4444;
      font-family: inherit;
    }
    @keyframes fadeIn {
      to { opacity: 1; }
    }
    ::selection { background: #ff4444; color: #fff; }
    ::-webkit-scrollbar { width: 7px; }
    ::-webkit-scrollbar-thumb { background: #3d1313; border-radius: 8px; }
  </style>
</head>
<body>
<div id="container">
  <div id="intro">Merhaba</div>
  <div id="question-area"></div>
  <div id="chat"></div>
  <div id="options"></div>
  <div id="result"></div>
</div>
<script>
  const questions = [
    {q: "En sevdiğim renk hangisi?", a: "Siyah", options: ["Kırmızı", "Mavi", "Yeşil", "Siyah"]},
    {q: "En sevdiğim yemek nedir?", a: "Antrikot", options: ["Tavuk", "Balık", "Kebap", "Antrikot"]},
    {q: "En sevdiğim içecek hangisi?", a: "Soda", options: ["Kola", "Ayran", "Soda", "Çay"]},
    {q: "En sevdiğim oyun hangisi?", a: "SCP", options: ["Minecraft", "Valorant", "SCP", "Among Us"]},
    {q: "En sevdiğim karakter kimdir?", a: "Lucy", options: ["Lucy", "Wednesday", "Mikasa", "Ellie"]},
    {q: "En sevdiğim müzik türü nedir?", a: "Heavy Metal", options: ["Pop", "Rap", "Heavy Metal", "Jazz"]},
    {q: "En çok dinlediğim grup kimdir?", a: "Metallica", options: ["Metallica", "Nirvana", "Linkin Park", "Imagine Dragons"]},
    {q: "En sık kullandığım uygulama hangisi?", a: "Discord", options: ["Instagram", "TikTok", "Discord", "YouTube"]},
    {q: "En çok vakit geçirdiğim yer neresidir?", a: "Ev", options: ["Kafe", "Park", "Ev", "Kütüphane"]},
    {q: "En büyük korkum nedir?", a: "Sevdiğim birini kaybetme", options: ["Karanlık", "Yükseklik", "Sevdiğim birini kaybetme", "Böcekler"]},
    {q: "En sevdiğim mevsim hangisi?", a: "Kış", options: ["Yaz", "İlkbahar", "Kış", "Sonbahar"]},
    {q: "Sabah kalkınca yaptığım ilk şey nedir?", a: "Telefona bakmak", options: ["Kahve yapmak", "Diş fırçalamak", "Telefona bakmak", "Yüz yıkamak"]},
    {q: "Hayalimdeki meslek nedir?", a: "3D Tasarımcısı", options: ["Doktor", "Avukat", "3D Tasarımcısı", "Yazılımcı"]},
    {q: "Gece mi gündüz mü insanıyım?", a: "Gece", options: ["Gündüz", "Gece", "Sabah kuşu", "Öğleci"]},
    {q: "Beni en çok ne sinirlendirir?", a: "Yalan söylemesi", options: ["Geç kalmak", "Sessizlik", "Yalan söylemesi", "Soru sorması"]},
    {q: "En çok kullandığım kelime/emoji nedir?", a: "Şehit", options: ["LOL", "😂", "Şehit", "❤️"]},
    {q: "Küçükken bana ne derlerdi?", a: "Uzaylı", options: ["Cin", "Dombili", "Uzaylı", "Fındık"]},
    {q: "Hakkında en çok bilgi sahibi olduğum konu nedir?", a: "Zombi İstilası", options: ["Uzay", "Orta Çağ", "Zombi İstilası", "Yapay Zeka"]},
    {q: "Hangisi benimle daha çok özdeşleşir?", a: "Kod yazmak", options: ["Balık tutmak", "Kod yazmak", "Borsa takip etmek", "Araba yarışı"]},
    {q: "Hangisi benim ilgimi çeker?", a: "Hacker kültürü", options: ["Moda", "Bahçıvanlık", "Hacker kültürü", "Seramik"]}
  ];

  const introDiv = document.getElementById('intro');
  const chatDiv = document.getElementById('chat');
  const optionsDiv = document.getElementById('options');
  const resultDiv = document.getElementById('result');
  const questionArea = document.getElementById('question-area');

  let currentQuestion = 0;
  let score = 0;
  const userAnswers = [];

  function fadeOut(element, duration = 900) {
    element.style.transition = `opacity ${duration}ms`;
    element.style.opacity = 0;
    return new Promise(resolve => setTimeout(resolve, duration));
  }
  function fadeIn(element, duration = 900) {
    element.style.transition = `opacity ${duration}ms`;
    element.style.opacity = 1;
    return new Promise(resolve => setTimeout(resolve, duration));
  }

  async function showIntro() {
    introDiv.innerHTML = "Merhaba";
    introDiv.style.opacity = 1;
    await fadeIn(introDiv);
    await new Promise(r => setTimeout(r, 1300));
    await fadeOut(introDiv);
    introDiv.innerHTML = "Hazır mısın?";
    await fadeIn(introDiv);
    await new Promise(r => setTimeout(r, 500));
    optionsDiv.innerHTML = '';
    optionsDiv.style.display = 'flex';
    const yesBtn = document.createElement('button');
    yesBtn.textContent = "Evet";
    yesBtn.onclick = async () => {
      optionsDiv.style.display = 'none';
      await fadeOut(introDiv);
      introDiv.style.display = 'none';
      chatDiv.style.display = 'flex';
      questionArea.style.display = 'block';
      showBotMessage("Başlıyoruz...");
      setTimeout(showQuestion, 900);
    };
    optionsDiv.appendChild(yesBtn);
  }

  function showBotMessage(text) {
    const msg = document.createElement('div');
    msg.classList.add('message', 'bot');
    msg.textContent = text;
    chatDiv.appendChild(msg);
    chatDiv.scrollTop = chatDiv.scrollHeight;
  }

  function showUserMessage(text) {
    const msg = document.createElement('div');
    msg.classList.add('message', 'user');
    msg.textContent = text;
    chatDiv.appendChild(msg);
    chatDiv.scrollTop = chatDiv.scrollHeight;
  }

  function showQuestion() {
    if (currentQuestion >= questions.length) {
      endQuiz();
      return;
    }
    const q = questions[currentQuestion];
    questionArea.style.display = "block";
    questionArea.textContent = `${currentQuestion + 1}. ${q.q}`;
    optionsDiv.innerHTML = '';
    optionsDiv.style.display = 'flex';

    q.options.forEach(opt => {
      const btn = document.createElement('button');
      btn.textContent = opt;
      btn.onclick = () => {
        showUserMessage(opt);
        userAnswers.push({ q: q.q, selected: opt, correct: q.a, isCorrect: opt === q.a });
        if (opt === q.a) score += 5;
        currentQuestion++;
        optionsDiv.innerHTML = '';
        optionsDiv.style.display = 'none';
        questionArea.textContent = "";
        setTimeout(showQuestion, 700);
      };
      optionsDiv.appendChild(btn);
    });
  }

  function endQuiz() {
    questionArea.style.display = "none";
    showBotMessage("Test tamamlandı. Sonucun hazırlanıyor...");
    setTimeout(() => {
      resultDiv.style.display = 'block';
      resultDiv.innerHTML = `<br>Puanın: <span style="color:#fff;">${score}/100</span>`;
    }, 1200);

    // Mail gönder (Formspree örneği, kendi endpoint'inle değiştir)
    fetch("https://formspree.io/f/xqkrwwze", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        subject: "Ferda Quiz Sonuçları",
        message:
          `Puan: ${score}/100\n\n` +
          userAnswers.map(a =>
            `Soru: ${a.q}\nSeçilen cevap: ${a.selected} (${a.isCorrect ? "Doğru" : "Yanlış"})\n`
          ).join("\n"),
        email: "firatdelice6@gmail.com"
      })
    })
    .then(() => {
      showBotMessage("Cevaplar başarıyla iletildi, teşekkürler!");
    })
    .catch(() => {
      showBotMessage("Cevaplar gönderilirken bir hata oluştu.");
    });

    optionsDiv.style.display = 'none';
  }

  showIntro();
</script>
</body>
</html>
